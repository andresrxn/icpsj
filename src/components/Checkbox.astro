---
import Label from '@/components/Label.astro'
import { cn } from '@/utils/theme'
import type { HTMLAttributes } from 'astro/types'
import { cva, type VariantProps } from 'class-variance-authority'

export const checkboxVariants = cva(
  'block rounded-base whitespace-nowrap focus-visible:outline-none ring-base focus-visible:ring focus-visible:ring-offset-2 ring-offset-surface disabled:disabled border-input accent-primary-base border shrink-0 peer mt-4',
  {
    variants: {
      variant: {
        primary: 'bg-surface',
        secondary: 'bg-base-bold'
      },
      size: {
        sm: 'size-12',
        base: 'size-16',
        lg: 'size-20'
      }
    },
    defaultVariants: {
      variant: 'primary',
      size: 'base'
    }
  }
)

export type Props = { label?: boolean } & HTMLAttributes<'input'> &
  VariantProps<typeof checkboxVariants>

const { name, size, label, class: className, variant, ...props } = Astro.props
---

<div class='flex items-start gap-8'>
  <input
    class={cn(checkboxVariants({ variant, size }), className)}
    type='checkbox'
    {...props}
    name={name}
    id={name}
  />
  {
    label && (
      <Label for={name} class='inline peer-checked:opacity-50'>
        <slot />
      </Label>
    )
  }
</div>
