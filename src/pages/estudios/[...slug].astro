---
import { getLangFromUrl } from '@/i18n/utils'
import StudiePost from '@/layouts/StudiePost.astro'
import { getEntry } from 'astro:content'

const lang = getLangFromUrl(Astro.url)

export const prerender = false
const { slug } = Astro.params
if (slug === undefined) {
  throw new Error('not slug found')
}
const entry = await getEntry('studies', lang + '/' + slug)
if (entry === undefined) {
  return Astro.redirect('/404')
}
const { Content } = await entry.render()
---

<StudiePost {...entry.data} slug={slug}>
  <Content />
</StudiePost>
